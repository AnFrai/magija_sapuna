var L=(()=>{let t=document.getElementById("search-open-button"),c=document.getElementById("search-activation-button"),o=document.getElementById("clear-input-button"),e=document.getElementById("search"),n=document.querySelector(".user-communication__button-wrapper--cart"),l=!1,u=e.value,d=g=>{g.classList.toggle("visually-hidden")};function r(){d(c),d(e),d(n),t.classList.remove("icon-button--user-communication-search-opened"),t.classList.remove("user-communication__button--search-opened"),l=!1,o.classList.add("visually-hidden")}let a=g=>{l&&!e.contains(g.target)&&!t.contains(g.target)&&!o.contains(g.target)&&r()},s=()=>{d(c),d(e),d(n),t.classList.toggle("icon-button--user-communication-search-opened"),t.classList.toggle("user-communication__button--search-opened"),l=!0,l&&e.focus(),o.classList.toggle("visually-hidden",e.value.trim()==="")},i=g=>{g.stopPropagation(),e.value="",e.focus(),o.classList.add("visually-hidden"),localStorage.setItem("searchValue",u)},m=()=>{!e.classList.contains("visually-hidden")&&(o.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue"))},_=()=>{document.addEventListener("click",a),t.addEventListener("click",s),o.addEventListener("click",i),e.addEventListener("input",m)};return{init:()=>{e.value=localStorage.getItem("searchValue")||u,_()}}})();var S=(()=>{let t=document.querySelector(".user-communication__menu-button"),c=document.querySelector(".main-nav__list"),o=document.querySelectorAll(".main-nav__main-list-text--list-down"),e=document.querySelector(".main-nav__sublist"),n=document.querySelector(".main-nav__main-list"),l=()=>{t.classList.toggle("icon-button--user-communication-menu-opened"),t.classList.toggle("icon-button--user-communication-menu-closed"),c.classList.toggle("main-nav__list--mobile-opened"),c.classList.toggle("main-nav__list--mobile-closed")},u=a=>{a.preventDefault(),e.classList.toggle("main-nav__sublist--closed"),e.classList.toggle("main-nav__sublist--opened"),n.classList.toggle("main-nav__main-list--mobile-closed"),n.classList.toggle("main-nav__main-list--mobile-opened")},d=()=>{t.addEventListener("click",l),o.forEach(a=>a.addEventListener("click",u))};return{init:()=>{d()}}})();var b={showMessage:c=>{let o=c.closest(".catalog__card").querySelector(".catalog__card-message"),e=o.querySelector(".catalog__card-message-text");e.classList.add("catalog__card-message-text--added"),setTimeout(()=>{e.classList.remove("catalog__card-message-text--added")},500),o.classList.contains("catalog__card-message--animate")?(clearTimeout(o.timeoutId),o.timeoutId=setTimeout(()=>{o.classList.remove("catalog__card-message--animate")},4e3)):(o.classList.add("catalog__card-message--animate"),o.timeoutId=setTimeout(()=>{o.classList.remove("catalog__card-message--animate")},4e3))}};function h(t,c,o){let e="";if(o){let n=new Date;n.setTime(n.getTime()+o*24*60*60*1e3),e=`; expires=${n.toUTCString()}`}document.cookie=`${t}=${c||""}${e}; path=/; SameSite=None; Secure`}function v(t){let c=`${t}=`,o=document.cookie.split(";");for(let e=0;e<o.length;e++){let n=o[e];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(c)===0)return n.substring(c.length,n.length)}return null}var y=(()=>{let t=document.querySelector(".user-communication__button--cart"),c=document.querySelector(".user-communication__button-counter--cart"),o=parseInt(v("cartItemCount"),10)||0,e=()=>{o>0?(t.classList.add("icon-button--user-communication-cart-added"),c.classList.remove("visually-hidden"),c.textContent=o,t.title=`Artikala u korpi: ${o}`):(t.classList.remove("icon-button--user-communication-cart-added"),c.classList.add("visually-hidden"),t.title="Nema artikala u korpi"),h("cartItemCount",o,7)},n=r=>{let a=r.dataset.productId;r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"),h(`product_${a}_added`,"true",7);let s=parseInt(v(`product_${a}_count`),10)||0;s+=1,h(`product_${a}_count`,s,7);let i=r.querySelector(".catalog__card-button-counter--cart");i.textContent=s;let m=document.querySelector(`#favoriteList [data-product-id="${a}"]`);if(m){let p=m.querySelector(".cart-button");p.classList.add("catalog__card-button--added-to-cart"),p.classList.remove("catalog__card-button--add-to-cart");let g=p.querySelector(".catalog__card-button-counter--cart");g.textContent=s}let _=document.querySelector(`.catalog__list [data-product-id="${a}"]`);if(_){let p=_.querySelector(".cart-button");p.classList.add("catalog__card-button--added-to-cart"),p.classList.remove("catalog__card-button--add-to-cart");let g=p.querySelector(".catalog__card-button-counter--cart");g.textContent=s}o++,e(),b.showMessage(r)},l=()=>{document.querySelectorAll(".cart-button").forEach(a=>{a.addEventListener("click",()=>n(a))})},u=(r,a)=>{v(`product_${a}_added`)==="true"&&(r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"))};return{init:()=>{l(),o=parseInt(v("cartItemCount"),10)||0,e(),document.querySelectorAll(".cart-button").forEach(a=>{let s=a.dataset.productId,i=parseInt(v(`product_${s}_count`),10)||0,m=a.querySelector(".catalog__card-button-counter--cart");m.textContent=i,u(a,s)})},handleCartAddition:n}})();var q=(()=>{let t=()=>{let o=document.querySelector("header"),e=document.querySelector("main");if(o&&e){let n=o.offsetHeight;e.style.paddingTop=`${n}px`}};return{init:()=>{t(),window.addEventListener("resize",t)}}})();function f(){let t=document.getElementById("favoriteList"),c=document.querySelector(".catalog-favorite__message");t&&c&&(t.children.length>0?c.classList.add("visually-hidden"):c.classList.remove("visually-hidden"))}var E=(()=>{let t=()=>JSON.parse(localStorage.getItem("favorites"))||[],c=a=>{localStorage.setItem("favorites",JSON.stringify(a))},o=a=>{let s=t();s=s.filter(_=>_!==a),c(s);let i=document.querySelector(`#favoriteList [data-product-id="${a}"]`);i&&i.remove();let m=document.querySelector(`.catalog__list [data-product-id="${a}"] .favorite-button`);m&&(m.classList.remove("catalog__card-button--favorite-added"),m.classList.add("catalog__card-button--favorite-add")),f()},e=(a,s)=>{let i=document.getElementById("favoriteList"),m=s.cloneNode(!0),_=m.querySelector(".favorite-button");_.classList.remove("catalog__card-button--favorite-add"),_.classList.add("catalog__card-button--favorite-added"),_.addEventListener("click",()=>o(a));let p=m.querySelector(".cart-button");p.addEventListener("click",()=>y.handleCartAddition(p)),i.appendChild(m),f()},n=(a,s)=>{let i=t();i.includes(a)||(i.push(a),c(i),e(a,s))},l=a=>{let s=a.closest(".catalog__card"),i=s.querySelector(".cart-button").dataset.productId;a.classList.contains("catalog__card-button--favorite-added")?o(i):(n(i,s),a.classList.remove("catalog__card-button--favorite-add"),a.classList.add("catalog__card-button--favorite-added"))},u=()=>{document.querySelectorAll(".favorite-button").forEach(s=>{s.addEventListener("click",()=>l(s))})},d=()=>{t().forEach(s=>{let i=document.querySelector(`[data-product-id="${s}"]`);i&&(i.querySelector(".favorite-button").classList.remove("catalog__card-button--favorite-add"),i.querySelector(".favorite-button").classList.add("catalog__card-button--favorite-added"),e(s,i))}),f()};return{init:()=>{u(),d()}}})();var x=(()=>{let t=()=>{document.querySelectorAll(".catalog__card--sale").forEach(e=>{let n=e.querySelector(".catalog__card-properties-item-value--sale"),l=e.querySelector(".catalog__card-image-superscript-text--sale"),u=e.querySelector(".catalog__card-properties-item-value--sale-price");if(n&&l&&u){let d=parseFloat(n.textContent),r=parseFloat(l.textContent.replace(/[^0-9.-]+/g,""));r=Math.abs(r);let a=d*(r/100),s=d-a;s=Math.round(s/10)*10,u.textContent=`${s} rsd`}})};return{init:()=>{t()}}})();function C(){document.querySelectorAll(".cart__checkbox-radio-container-dropdown").forEach(c=>{c.addEventListener("click",function(){this.closest("li").querySelectorAll(".cart__option-wrapper").forEach(e=>{e.classList.toggle("visually-hidden")}),c.classList.toggle("cart__checkbox-radio-container-dropdown--opened")})})}var M=(()=>{let t=document.querySelector(".main-header__category-slider"),c=()=>{let n=t.scrollWidth-t.clientWidth;t.scrollLeft>=n-5?t.style.setProperty("--shadow-end-opacity","0"):t.style.setProperty("--shadow-end-opacity","1"),t.scrollLeft<=5?t.style.setProperty("--shadow-start-opacity","0"):t.style.setProperty("--shadow-start-opacity","1")},o=()=>{t.addEventListener("scroll",c)};return{init:()=>{c(),o()}}})();var w=(()=>{let t=document.querySelector(".hero"),c=document.querySelector(".hero__button"),o=-.2,e=()=>{let u=window.scrollY,d=u*o;t.style.backgroundPositionY=`${d}px`;let r=(u-15)/90;r=Math.max(0,Math.min(r,1)),c.style.opacity=r,c.style.pointerEvents=r>0?"auto":"none"},n=()=>{window.addEventListener("scroll",e)};return{init:()=>{n()}}})();var B=(()=>{let t=n=>{n.classList.toggle("visually-hidden")},c=n=>{let l=n.nextElementSibling;t(l),n.classList.toggle("faq__card-title--opened")},o=()=>{document.querySelectorAll(".faq__card-title").forEach(l=>{l.addEventListener("click",()=>c(l))})};return{init:()=>{o()}}})();document.addEventListener("DOMContentLoaded",()=>{L.init(),S.init(),y.init(),q.init(),E.init(),x.init(),f(),C(),M.init(),w.init(),B.init()});
