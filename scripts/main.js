var y=(()=>{let t=document.getElementById("search-open-button"),s=document.getElementById("search-activation-button"),a=document.getElementById("clear-input-button"),e=document.getElementById("search"),c=document.querySelector(".user-communication__button-wrapper--cart"),l=!1,u=e.value,d=g=>{g.classList.toggle("visually-hidden")};function r(){d(s),d(e),d(c),t.classList.remove("icon-button--user-communication-search-opened"),t.classList.remove("user-communication__button--search-opened"),l=!1,a.classList.add("visually-hidden")}let o=g=>{l&&!e.contains(g.target)&&!t.contains(g.target)&&!a.contains(g.target)&&r()},n=()=>{d(s),d(e),d(c),t.classList.toggle("icon-button--user-communication-search-opened"),t.classList.toggle("user-communication__button--search-opened"),l=!0,l&&e.focus(),a.classList.toggle("visually-hidden",e.value.trim()==="")},i=g=>{g.stopPropagation(),e.value="",e.focus(),a.classList.add("visually-hidden"),localStorage.setItem("searchValue",u)},m=()=>{!e.classList.contains("visually-hidden")&&(a.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue"))},v=()=>{document.addEventListener("click",o),t.addEventListener("click",n),a.addEventListener("click",i),e.addEventListener("input",m)};return{init:()=>{e.value=localStorage.getItem("searchValue")||u,v()}}})();var S=(()=>{let t=document.querySelector(".user-communication__menu-button"),s=document.querySelector(".main-nav__list"),a=document.querySelectorAll(".main-nav__main-list-text--list-down"),e=document.querySelector(".main-nav__sublist"),c=document.querySelector(".main-nav__main-list"),l=()=>{t.classList.toggle("icon-button--user-communication-menu-opened"),t.classList.toggle("icon-button--user-communication-menu-closed"),s.classList.toggle("main-nav__list--mobile-opened"),s.classList.toggle("main-nav__list--mobile-closed")},u=o=>{o.preventDefault(),e.classList.toggle("main-nav__sublist--closed"),e.classList.toggle("main-nav__sublist--opened"),c.classList.toggle("main-nav__main-list--mobile-closed"),c.classList.toggle("main-nav__main-list--mobile-opened")},d=()=>{t.addEventListener("click",l),a.forEach(o=>o.addEventListener("click",u))};return{init:()=>{d()}}})();var b={showMessage:s=>{let a=s.closest(".catalog__card").querySelector(".catalog__card-message"),e=a.querySelector(".catalog__card-message-text");e.classList.add("catalog__card-message-text--added"),setTimeout(()=>{e.classList.remove("catalog__card-message-text--added")},500),a.classList.contains("catalog__card-message--animate")?(clearTimeout(a.timeoutId),a.timeoutId=setTimeout(()=>{a.classList.remove("catalog__card-message--animate")},4e3)):(a.classList.add("catalog__card-message--animate"),a.timeoutId=setTimeout(()=>{a.classList.remove("catalog__card-message--animate")},4e3))}};function h(t,s,a){let e="";if(a){let c=new Date;c.setTime(c.getTime()+a*24*60*60*1e3),e=`; expires=${c.toUTCString()}`}document.cookie=`${t}=${s||""}${e}; path=/; SameSite=None; Secure`}function p(t){let s=`${t}=`,a=document.cookie.split(";");for(let e=0;e<a.length;e++){let c=a[e];for(;c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(s)===0)return c.substring(s.length,c.length)}return null}var L=(()=>{let t=document.querySelector(".user-communication__button--cart"),s=document.querySelector(".user-communication__button-counter--cart"),a=parseInt(p("cartItemCount"),10)||0,e=()=>{a>0?(t.classList.add("icon-button--user-communication-cart-added"),s.classList.remove("visually-hidden"),s.textContent=a,t.title=`Artikala u korpi: ${a}`):(t.classList.remove("icon-button--user-communication-cart-added"),s.classList.add("visually-hidden"),t.title="Nema artikala u korpi"),h("cartItemCount",a,7)},c=r=>{let o=r.dataset.productId;r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"),h(`product_${o}_added`,"true",7);let n=parseInt(p(`product_${o}_count`),10)||0;n+=1,h(`product_${o}_count`,n,7);let i=r.querySelector(".catalog__card-button-counter--cart");i.textContent=n;let m=document.querySelector(`#favoriteList [data-product-id="${o}"]`);if(m){let _=m.querySelector(".cart-button");_.classList.add("catalog__card-button--added-to-cart"),_.classList.remove("catalog__card-button--add-to-cart");let g=_.querySelector(".catalog__card-button-counter--cart");g.textContent=n}let v=document.querySelector(`.catalog__list [data-product-id="${o}"]`);if(v){let _=v.querySelector(".cart-button");_.classList.add("catalog__card-button--added-to-cart"),_.classList.remove("catalog__card-button--add-to-cart");let g=_.querySelector(".catalog__card-button-counter--cart");g.textContent=n}a++,e(),b.showMessage(r)},l=()=>{document.querySelectorAll(".cart-button").forEach(o=>{o.addEventListener("click",()=>c(o))})},u=(r,o)=>{p(`product_${o}_added`)==="true"&&(r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"))};return{init:()=>{l(),a=parseInt(p("cartItemCount"),10)||0,e(),document.querySelectorAll(".cart-button").forEach(o=>{let n=o.dataset.productId,i=parseInt(p(`product_${n}_count`),10)||0,m=o.querySelector(".catalog__card-button-counter--cart");m.textContent=i,u(o,n)})},handleCartAddition:c}})();function f(){let t=document.getElementById("favoriteList"),s=document.querySelector(".catalog-favorite__message");t&&s&&(t.children.length>0?s.classList.add("visually-hidden"):s.classList.remove("visually-hidden"))}var q=(()=>{let t=()=>JSON.parse(localStorage.getItem("favorites"))||[],s=o=>{localStorage.setItem("favorites",JSON.stringify(o))},a=o=>{let n=t();n=n.filter(v=>v!==o),s(n);let i=document.querySelector(`#favoriteList [data-product-id="${o}"]`);i&&i.remove();let m=document.querySelector(`.catalog__list [data-product-id="${o}"] .favorite-button`);m&&(m.classList.remove("catalog__card-button--favorite-added"),m.classList.add("catalog__card-button--favorite-add")),f()},e=(o,n)=>{let i=document.getElementById("favoriteList"),m=n.cloneNode(!0),v=m.querySelector(".favorite-button");v.classList.remove("catalog__card-button--favorite-add"),v.classList.add("catalog__card-button--favorite-added"),v.addEventListener("click",()=>a(o));let _=m.querySelector(".cart-button");_.addEventListener("click",()=>L.handleCartAddition(_)),i.appendChild(m),f()},c=(o,n)=>{let i=t();i.includes(o)||(i.push(o),s(i),e(o,n))},l=o=>{let n=o.closest(".catalog__card"),i=n.querySelector(".cart-button").dataset.productId;o.classList.contains("catalog__card-button--favorite-added")?a(i):(c(i,n),o.classList.remove("catalog__card-button--favorite-add"),o.classList.add("catalog__card-button--favorite-added"))},u=()=>{document.querySelectorAll(".favorite-button").forEach(n=>{n.addEventListener("click",()=>l(n))})},d=()=>{t().forEach(n=>{let i=document.querySelector(`[data-product-id="${n}"]`);i&&(i.querySelector(".favorite-button").classList.remove("catalog__card-button--favorite-add"),i.querySelector(".favorite-button").classList.add("catalog__card-button--favorite-added"),e(n,i))}),f()};return{init:()=>{u(),d()}}})();var E=(()=>{let t=()=>{document.querySelectorAll(".catalog__card--sale").forEach(e=>{let c=e.querySelector(".catalog__card-properties-item-value--sale"),l=e.querySelector(".catalog__card-image-superscript-text--sale"),u=e.querySelector(".catalog__card-properties-item-value--sale-price");if(c&&l&&u){let d=parseFloat(c.textContent),r=parseFloat(l.textContent.replace(/[^0-9.-]+/g,""));r=Math.abs(r);let o=d*(r/100),n=d-o;n=Math.round(n/10)*10,u.textContent=`${n} rsd`}})};return{init:()=>{t()}}})();var C=(()=>{let t=document.querySelector(".main-header__category-slider"),s=()=>{let c=t.scrollWidth-t.clientWidth;t.scrollLeft>=c-5?t.style.setProperty("--shadow-end-opacity","0"):t.style.setProperty("--shadow-end-opacity","1"),t.scrollLeft<=5?t.style.setProperty("--shadow-start-opacity","0"):t.style.setProperty("--shadow-start-opacity","1")},a=()=>{t.addEventListener("scroll",s)};return{init:()=>{s(),a()}}})();var x=(()=>{let t=document.querySelector(".hero"),s=document.querySelector(".hero__button"),a=-.2,e=()=>{let u=window.scrollY,d=u*a;t.style.backgroundPositionY=`${d}px`;let r=(u-15)/90;r=Math.max(0,Math.min(r,1)),s.style.opacity=r,s.style.pointerEvents=r>0?"auto":"none"},c=()=>{window.addEventListener("scroll",e)};return{init:()=>{c()}}})();var M=(()=>{let t=c=>{c.classList.toggle("visually-hidden")},s=c=>{let l=c.nextElementSibling;t(l),c.classList.toggle("faq__card-title--opened")},a=()=>{document.querySelectorAll(".faq__card-title").forEach(l=>{l.addEventListener("click",()=>s(l))})};return{init:()=>{a()}}})();document.addEventListener("DOMContentLoaded",()=>{y.init(),S.init(),L.init(),q.init(),E.init(),f(),C.init(),x.init(),M.init()});
