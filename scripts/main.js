var h=(()=>{let t=document.getElementById("search-open-button"),n=document.getElementById("search-activation-button"),a=document.getElementById("clear-input-button"),e=document.getElementById("search"),c=document.querySelector(".user-communication__button-wrapper--cart"),l=!1,m=e.value,d=u=>{u.classList.toggle("visually-hidden")},r=u=>{l&&!e.contains(u.target)&&!t.contains(u.target)&&!a.contains(u.target)&&(d(n),d(e),d(a),d(c),t.classList.remove("icon-button--user-communication-search-opened"),t.classList.remove("user-communication__button--search-opened"),l=!1)},o=()=>{d(n),d(e),d(c),t.classList.toggle("icon-button--user-communication-search-opened"),t.classList.toggle("user-communication__button--search-opened"),l=!e.classList.contains("visually-hidden"),l&&e.focus(),a.classList.toggle("visually-hidden",e.value.trim()==="")},s=u=>{u.stopPropagation(),e.value="",e.focus(),a.classList.add("visually-hidden"),localStorage.setItem("searchValue",m)},i=()=>{!e.classList.contains("visually-hidden")&&(a.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue"))},g=()=>{document.addEventListener("click",r),t.addEventListener("click",o),a.addEventListener("click",s),e.addEventListener("input",i)};return{init:()=>{e.value=localStorage.getItem("searchValue")||m,g()}}})();var L=(()=>{let t=document.querySelector(".user-communication__menu-button"),n=document.querySelector(".main-nav__list"),a=document.querySelectorAll(".main-nav__main-list-text--list-down"),e=document.querySelector(".main-nav__sublist"),c=document.querySelector(".main-nav__main-list"),l=()=>{t.classList.toggle("icon-button--user-communication-menu-opened"),t.classList.toggle("icon-button--user-communication-menu-closed"),n.classList.toggle("main-nav__list--mobile-opened"),n.classList.toggle("main-nav__list--mobile-closed")},m=o=>{o.preventDefault(),e.classList.toggle("main-nav__sublist--closed"),e.classList.toggle("main-nav__sublist--opened"),c.classList.toggle("main-nav__main-list--mobile-closed"),c.classList.toggle("main-nav__main-list--mobile-opened")},d=()=>{t.addEventListener("click",l),a.forEach(o=>o.addEventListener("click",m))};return{init:()=>{d()}}})();var S={showMessage:n=>{let a=n.closest(".catalog__card").querySelector(".catalog__card-message"),e=a.querySelector(".catalog__card-message-text");e.classList.add("catalog__card-message-text--added"),setTimeout(()=>{e.classList.remove("catalog__card-message-text--added")},500),a.classList.contains("catalog__card-message--animate")?(clearTimeout(a.timeoutId),a.timeoutId=setTimeout(()=>{a.classList.remove("catalog__card-message--animate")},4e3)):(a.classList.add("catalog__card-message--animate"),a.timeoutId=setTimeout(()=>{a.classList.remove("catalog__card-message--animate")},4e3))}};function f(t,n,a){let e="";if(a){let c=new Date;c.setTime(c.getTime()+a*24*60*60*1e3),e=`; expires=${c.toUTCString()}`}document.cookie=`${t}=${n||""}${e}; path=/`}function v(t){let n=`${t}=`,a=document.cookie.split(";");for(let e=0;e<a.length;e++){let c=a[e];for(;c.charAt(0)===" ";)c=c.substring(1,c.length);if(c.indexOf(n)===0)return c.substring(n.length,c.length)}return null}var y=(()=>{let t=document.querySelector(".user-communication__button--cart"),n=document.querySelector(".user-communication__button-counter--cart"),a=parseInt(v("cartItemCount"),10)||0,e=()=>{a>0?(t.classList.add("icon-button--user-communication-cart-added"),n.classList.remove("visually-hidden"),n.textContent=a,t.title=`Artikala u korpi: ${a}`):(t.classList.remove("icon-button--user-communication-cart-added"),n.classList.add("visually-hidden"),t.title="Nema artikala u korpi"),f("cartItemCount",a,7)},c=r=>{let o=r.dataset.productId;r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"),f(`product_${o}_added`,"true",7);let s=parseInt(v(`product_${o}_count`),10)||0;s+=1,f(`product_${o}_count`,s,7);let i=r.querySelector(".catalog__card-button-counter--cart");i.textContent=s;let g=document.querySelector(`#favoriteList [data-product-id="${o}"]`);if(g){let u=g.querySelector(".catalog__card-button-counter--cart");u.textContent=s}let _=document.querySelector(`.catalog__list [data-product-id="${o}"]`);if(_){let u=_.querySelector(".catalog__card-button-counter--cart");u.textContent=s}a++,e(),S.showMessage(r)},l=()=>{document.querySelectorAll(".cart-button").forEach(o=>{o.addEventListener("click",()=>c(o))})},m=(r,o)=>{v(`product_${o}_added`)==="true"&&(r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"))};return{init:()=>{l(),a=parseInt(v("cartItemCount"),10)||0,e(),document.querySelectorAll(".cart-button").forEach(o=>{let s=o.dataset.productId,i=parseInt(v(`product_${s}_count`),10)||0,g=o.querySelector(".catalog__card-button-counter--cart");g.textContent=i,m(o,s)})},handleCartAddition:c}})();function p(){let t=document.getElementById("favoriteList"),n=document.querySelector(".catalog-favorite__message");t&&n&&(t.children.length>0?n.classList.add("visually-hidden"):n.classList.remove("visually-hidden"))}var b=(()=>{let t=()=>JSON.parse(localStorage.getItem("favorites"))||[],n=o=>{localStorage.setItem("favorites",JSON.stringify(o))},a=o=>{let s=t();s=s.filter(_=>_!==o),n(s);let i=document.querySelector(`#favoriteList [data-product-id="${o}"]`);i&&i.remove();let g=document.querySelector(`.catalog__list [data-product-id="${o}"] .favorite-button`);g&&(g.classList.remove("catalog__card-button--favorite-added"),g.classList.add("catalog__card-button--favorite-add")),p()},e=(o,s)=>{let i=document.getElementById("favoriteList"),g=s.cloneNode(!0),_=g.querySelector(".favorite-button");_.classList.remove("catalog__card-button--favorite-add"),_.classList.add("catalog__card-button--favorite-added"),_.addEventListener("click",()=>a(o));let u=g.querySelector(".cart-button");u.addEventListener("click",()=>y.handleCartAddition(u)),i.appendChild(g),p()},c=(o,s)=>{let i=t();i.includes(o)||(i.push(o),n(i),e(o,s))},l=o=>{let s=o.closest(".catalog__card"),i=s.querySelector(".cart-button").dataset.productId;o.classList.contains("catalog__card-button--favorite-added")?a(i):(c(i,s),o.classList.remove("catalog__card-button--favorite-add"),o.classList.add("catalog__card-button--favorite-added"))},m=()=>{document.querySelectorAll(".favorite-button").forEach(s=>{s.addEventListener("click",()=>l(s))})},d=()=>{t().forEach(s=>{let i=document.querySelector(`[data-product-id="${s}"]`);i&&(i.querySelector(".favorite-button").classList.remove("catalog__card-button--favorite-add"),i.querySelector(".favorite-button").classList.add("catalog__card-button--favorite-added"),e(s,i))}),p()};return{init:()=>{m(),d()}}})();var q=(()=>{let t=()=>{document.querySelectorAll(".catalog__card--sale").forEach(e=>{let c=e.querySelector(".catalog__card-properties-item-value--sale"),l=e.querySelector(".catalog__card-image-superscript-text--sale"),m=e.querySelector(".catalog__card-properties-item-value--sale-price");if(c&&l&&m){let d=parseFloat(c.textContent),r=parseFloat(l.textContent.replace(/[^0-9.-]+/g,""));r=Math.abs(r);let o=d*(r/100),s=d-o;s=Math.round(s/10)*10,m.textContent=`${s} rsd`}})};return{init:()=>{t()}}})();var x=()=>document.querySelector(".main-header__category-slider");var C=(()=>{let t=x,n=()=>{let c=t.scrollWidth-t.clientWidth;t.scrollLeft>=c-5?t.style.setProperty("--shadow-end-opacity","0"):t.style.setProperty("--shadow-end-opacity","1"),t.scrollLeft<=5?t.style.setProperty("--shadow-start-opacity","0"):t.style.setProperty("--shadow-start-opacity","1")},a=()=>{t.addEventListener("scroll",n)};return{init:()=>{n(),a()}}})();var E=(()=>{let t=document.querySelector(".hero"),n=document.querySelector(".hero__button"),a=-.2,e=()=>{let m=window.scrollY,d=m*a;t.style.backgroundPositionY=`${d}px`;let r=(m-15)/90;r=Math.max(0,Math.min(r,1)),n.style.opacity=r,n.style.pointerEvents=r>0?"auto":"none"},c=()=>{window.addEventListener("scroll",e)};return{init:()=>{c()}}})();var M=(()=>{let t=c=>{c.classList.toggle("visually-hidden")},n=c=>{let l=c.nextElementSibling;t(l),c.classList.toggle("faq__card-title--opened")},a=()=>{document.querySelectorAll(".faq__card-title").forEach(l=>{l.addEventListener("click",()=>n(l))})};return{init:()=>{a()}}})();document.addEventListener("DOMContentLoaded",()=>{h.init(),L.init(),y.init(),b.init(),q.init(),p(),C.init(),E.init(),M.init()});
