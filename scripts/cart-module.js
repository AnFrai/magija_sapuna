var g={showMessage:c=>{let t=c.closest(".catalog__card").querySelector(".catalog__card-message"),a=t.querySelector(".catalog__card-message-text");a.classList.add("catalog__card-message-text--added"),setTimeout(()=>{a.classList.remove("catalog__card-message-text--added")},500),t.classList.contains("catalog__card-message--animate")?(clearTimeout(t.timeoutId),t.timeoutId=setTimeout(()=>{t.classList.remove("catalog__card-message--animate")},4e3)):(t.classList.add("catalog__card-message--animate"),t.timeoutId=setTimeout(()=>{t.classList.remove("catalog__card-message--animate")},4e3))}};function u(s,c,t){let a="";if(t){let e=new Date;e.setTime(e.getTime()+t*24*60*60*1e3),a=`; expires=${e.toUTCString()}`}document.cookie=`${s}=${c||""}${a}; path=/`}function d(s){let c=`${s}=`,t=document.cookie.split(";");for(let a=0;a<t.length;a++){let e=t[a];for(;e.charAt(0)===" ";)e=e.substring(1,e.length);if(e.indexOf(c)===0)return e.substring(c.length,e.length)}return null}var h=(()=>{let s=document.querySelector(".user-communication__button--cart"),c=document.querySelector(".user-communication__button-counter--cart"),t=parseInt(d("cartItemCount"),10)||0,a=()=>{t>0?(s.classList.add("icon-button--user-communication-cart-added"),c.classList.remove("visually-hidden"),c.textContent=t,s.title=`Artikala u korpi: ${t}`):(s.classList.remove("icon-button--user-communication-cart-added"),c.classList.add("visually-hidden"),s.title="Nema artikala u korpi"),u("cartItemCount",t,7)},e=r=>{let o=r.dataset.productId;r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"),u(`product_${o}_added`,"true",7);let n=parseInt(d(`product_${o}_count`),10)||0;n+=1,u(`product_${o}_count`,n,7);let l=r.querySelector(".catalog__card-button-counter--cart");l.textContent=n;let i=document.querySelector(`#favoriteList [data-product-id="${o}"]`);if(i){let m=i.querySelector(".catalog__card-button-counter--cart");m.textContent=n}let _=document.querySelector(`.catalog__list [data-product-id="${o}"]`);if(_){let m=_.querySelector(".catalog__card-button-counter--cart");m.textContent=n}t++,a(),g.showMessage(r)},p=()=>{document.querySelectorAll(".cart-button").forEach(o=>{o.addEventListener("click",()=>e(o))})},C=(r,o)=>{d(`product_${o}_added`)==="true"&&(r.classList.add("catalog__card-button--added-to-cart"),r.classList.remove("catalog__card-button--add-to-cart"))};return{init:()=>{p(),t=parseInt(d("cartItemCount"),10)||0,a(),document.querySelectorAll(".cart-button").forEach(o=>{let n=o.dataset.productId,l=parseInt(d(`product_${n}_count`),10)||0,i=o.querySelector(".catalog__card-button-counter--cart");i.textContent=l,C(o,n)})},handleCartAddition:e}})();export{h as cartModule};
