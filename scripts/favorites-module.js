var S={showMessage:r=>{let o=r.closest(".slider-catalog__card").querySelector(".slider-catalog__card-message"),d=o.querySelector(".slider-catalog__card-message-text");d.classList.add("slider-catalog__card-message-text--added"),setTimeout(()=>{d.classList.remove("slider-catalog__card-message-text--added")},500),o.classList.contains("slider-catalog__card-message--animate")?(clearTimeout(o.timeoutId),o.timeoutId=setTimeout(()=>{o.classList.remove("slider-catalog__card-message--animate")},4e3)):(o.classList.add("slider-catalog__card-message--animate"),o.timeoutId=setTimeout(()=>{o.classList.remove("slider-catalog__card-message--animate")},4e3))}};function _(c,r,o){let d="";if(o){let s=new Date;s.setTime(s.getTime()+o*24*60*60*1e3),d=`; expires=${s.toUTCString()}`}document.cookie=`${c}=${r||""}${d}; path=/; SameSite=None; Secure`}function m(c){let r=`${c}=`,o=document.cookie.split(";");for(let d=0;d<o.length;d++){let s=o[d];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(r)===0)return s.substring(r.length,s.length)}return null}var C=(()=>{let c=document.querySelector(".user-communication__button--cart"),r=document.querySelector(".user-communication__button-counter--cart"),o=parseInt(m("cartItemCount"),10)||0,d=()=>{o>0?(c.classList.add("icon-button--user-communication-cart-added"),r.classList.remove("visually-hidden"),r.textContent=o,c.title=`Artikala u korpi: ${o}`):(c.classList.remove("icon-button--user-communication-cart-added"),r.classList.add("visually-hidden"),c.title="Nema artikala u korpi"),_("cartItemCount",o,7)},s=n=>{let t=n.dataset.productId;n.classList.add("slider-catalog__card-button--added-to-cart"),n.classList.remove("slider-catalog__card-button--add-to-cart"),_(`product_${t}_added`,"true",7);let e=parseInt(m(`product_${t}_count`),10)||0;e+=1,_(`product_${t}_count`,e,7);let a=n.querySelector(".slider-catalog__card-button-counter--cart");a.textContent=e;let i=document.querySelector(`#favoriteList [data-product-id="${t}"]`);if(i){let l=i.querySelector(".cart-button");l.classList.add("slider-catalog__card-button--added-to-cart"),l.classList.remove("slider-catalog__card-button--add-to-cart");let p=l.querySelector(".slider-catalog__card-button-counter--cart");p.textContent=e}let u=document.querySelector(`.slider-catalog__list [data-product-id="${t}"]`);if(u){let l=u.querySelector(".cart-button");l.classList.add("slider-catalog__card-button--added-to-cart"),l.classList.remove("slider-catalog__card-button--add-to-cart");let p=l.querySelector(".slider-catalog__card-button-counter--cart");p.textContent=e}o++,d(),S.showMessage(n)},v=()=>{document.querySelectorAll(".cart-button").forEach(t=>{t.addEventListener("click",()=>s(t))})},f=(n,t)=>{m(`product_${t}_added`)==="true"&&(n.classList.add("slider-catalog__card-button--added-to-cart"),n.classList.remove("slider-catalog__card-button--add-to-cart"))};return{init:()=>{v(),o=parseInt(m("cartItemCount"),10)||0,d(),document.querySelectorAll(".cart-button").forEach(t=>{let e=t.dataset.productId,a=parseInt(m(`product_${e}_count`),10)||0,i=t.querySelector(".slider-catalog__card-button-counter--cart");i.textContent=a,f(t,e)})},handleCartAddition:s}})();function g(){let c=document.getElementById("favoriteList"),r=document.querySelector(".no-articles");c&&r&&(c.children.length>0?r.classList.add("visually-hidden"):r.classList.remove("visually-hidden"))}var B=(()=>{let c=()=>JSON.parse(localStorage.getItem("favorites"))||[],r=t=>{localStorage.setItem("favorites",JSON.stringify(t))},o=t=>{let e=c();e=e.filter(u=>u!==t),r(e);let a=document.querySelector(`#favoriteList [data-product-id="${t}"]`);a&&a.remove();let i=document.querySelector(`.slider-catalog__list [data-product-id="${t}"] .favorite-button`);i&&(i.classList.remove("slider-catalog__card-button--favorite-added"),i.classList.add("slider-catalog__card-button--favorite-add")),g()},d=(t,e)=>{let a=document.getElementById("favoriteList"),i=e.cloneNode(!0),u=i.querySelector(".favorite-button");u.classList.remove("slider-catalog__card-button--favorite-add"),u.classList.add("slider-catalog__card-button--favorite-added"),u.addEventListener("click",()=>o(t));let l=i.querySelector(".cart-button");l.addEventListener("click",()=>C.handleCartAddition(l)),a.appendChild(i),g()},s=(t,e)=>{let a=c();a.includes(t)||(a.push(t),r(a),d(t,e))},v=t=>{let e=t.closest(".slider-catalog__card"),a=e.querySelector(".cart-button").dataset.productId;t.classList.contains("slider-catalog__card-button--favorite-added")?o(a):(s(a,e),t.classList.remove("slider-catalog__card-button--favorite-add"),t.classList.add("slider-catalog__card-button--favorite-added"))},f=()=>{document.querySelectorAll(".favorite-button").forEach(e=>{e.addEventListener("click",()=>v(e))})},L=()=>{c().forEach(e=>{let a=document.querySelector(`[data-product-id="${e}"]`);a&&(a.querySelector(".favorite-button").classList.remove("slider-catalog__card-button--favorite-add"),a.querySelector(".favorite-button").classList.add("slider-catalog__card-button--favorite-added"),d(e,a))}),g()};return{init:()=>{f(),L()}}})();export{B as favoritesModule};
