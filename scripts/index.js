document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("search-open-button"),m=document.getElementById("search-activation-button"),a=document.getElementById("clear-input-button"),e=document.getElementById("search"),g=document.querySelector(".user-communication__button-wrapper--cart"),n=!1,v=e.value;function r(t){t.classList.toggle("visually-hidden")}e.value=localStorage.getItem("searchValue")||v,s.addEventListener("click",()=>{r(m),r(e),r(g),s.classList.toggle("icon-button--user-communication-search-opened"),s.classList.toggle("user-communication__button--search-opened"),n=!e.classList.contains("visually-hidden"),n&&e.focus(),a.classList.toggle("visually-hidden",e.value.trim()==="")}),document.addEventListener("click",t=>{n&&!e.contains(t.target)&&!s.contains(t.target)&&!a.contains(t.target)&&(m.classList.add("visually-hidden"),a.classList.add("visually-hidden"),e.classList.add("visually-hidden"),s.classList.remove("icon-button--user-communication-search-opened"),s.classList.remove("user-communication__button--search-opened"),g.classList.remove("visually-hidden"),n=!1)}),a.addEventListener("click",t=>{t.stopPropagation(),e.value="",e.focus(),a.classList.add("visually-hidden"),localStorage.setItem("searchValue",v)}),e.addEventListener("input",()=>{n&&a.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue")});let d=document.querySelector(".user-communication__menu-button"),L=document.querySelector(".main-nav__list");d.addEventListener("click",()=>{d.classList.toggle("icon-button--user-communication-menu-opened"),d.classList.toggle("icon-button--user-communication-menu-closed"),L.classList.toggle("main-nav__list--mobile-opened"),L.classList.toggle("main-nav__list--mobile-closed")});let f=document.querySelectorAll(".main-nav__main-list-text--list-down"),y=document.querySelector(".main-nav__sublist"),h=document.querySelector(".main-nav__main-list");f.forEach(t=>{t.addEventListener("click",u=>{u.preventDefault(),y.classList.toggle("main-nav__sublist--closed"),y.classList.toggle("main-nav__sublist--opened"),h.classList.toggle("main-nav__main-list--mobile-closed"),h.classList.toggle("main-nav__main-list--mobile-opened")})});let b=document.querySelector("header"),S=document.querySelector("main"),E=b.offsetHeight;S.style.paddingTop=`${E}px`;let B=document.querySelector(".hero"),q=-.7;window.addEventListener("scroll",()=>{let u=window.scrollY*q;B.style.backgroundPositionY=`${u}px`});let o=document.querySelector(".main-header__category-slider");function _(){let t=o.scrollWidth-o.clientWidth;o.scrollLeft>=t-5?o.style.setProperty("--shadow-end-opacity","0"):o.style.setProperty("--shadow-end-opacity","1"),o.scrollLeft<=5?o.style.setProperty("--shadow-start-opacity","0"):o.style.setProperty("--shadow-start-opacity","1")}_(),o.addEventListener("scroll",_),document.querySelectorAll(".favorite-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--favorite-add"),t.classList.toggle("catalog__card-button--favorite-added")})});let i=document.querySelector(".user-communication__button--cart"),l=document.querySelector(".user-communication__button-counter--cart"),c=parseInt(l.textContent,10)||0;function p(){c>0?(i.classList.add("icon-button--user-communication-cart-added"),l.classList.remove("visually-hidden"),l.textContent=c,i.title=`Artikala u korpi: ${c}`):(i.classList.remove("icon-button--user-communication-cart-added"),l.classList.add("visually-hidden"),i.title="Nema artikala u korpi")}p(),document.querySelectorAll(".cart-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--add-to-cart"),t.classList.toggle("catalog__card-button--added-to-cart"),t.classList.contains("catalog__card-button--added-to-cart")?c++:c--,p()})})});
