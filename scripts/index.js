document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("search-open-button"),g=document.getElementById("search-activation-button"),a=document.getElementById("clear-input-button"),e=document.getElementById("search"),v=document.querySelector(".user-communication__button-wrapper--cart"),n=!1,y=e.value;function d(t){t.classList.toggle("visually-hidden")}e.value=localStorage.getItem("searchValue")||y,s.addEventListener("click",()=>{d(g),d(e),d(v),s.classList.toggle("icon-button--user-communication-search-opened"),s.classList.toggle("user-communication__button--search-opened"),n=!e.classList.contains("visually-hidden"),n&&e.focus(),a.classList.toggle("visually-hidden",e.value.trim()==="")}),document.addEventListener("click",t=>{n&&!e.contains(t.target)&&!s.contains(t.target)&&!a.contains(t.target)&&(g.classList.add("visually-hidden"),a.classList.add("visually-hidden"),e.classList.add("visually-hidden"),s.classList.remove("icon-button--user-communication-search-opened"),s.classList.remove("user-communication__button--search-opened"),v.classList.remove("visually-hidden"),n=!1)}),a.addEventListener("click",t=>{t.stopPropagation(),e.value="",e.focus(),a.classList.add("visually-hidden"),localStorage.setItem("searchValue",y)}),e.addEventListener("input",()=>{n&&a.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue")});let u=document.querySelector(".user-communication__menu-button"),h=document.querySelector(".main-nav__list");u.addEventListener("click",()=>{u.classList.toggle("icon-button--user-communication-menu-opened"),u.classList.toggle("icon-button--user-communication-menu-closed"),h.classList.toggle("main-nav__list--mobile-opened"),h.classList.toggle("main-nav__list--mobile-closed")});let S=document.querySelectorAll(".main-nav__main-list-text--list-down"),L=document.querySelector(".main-nav__sublist"),_=document.querySelector(".main-nav__main-list");S.forEach(t=>{t.addEventListener("click",m=>{m.preventDefault(),L.classList.toggle("main-nav__sublist--closed"),L.classList.toggle("main-nav__sublist--opened"),_.classList.toggle("main-nav__main-list--mobile-closed"),_.classList.toggle("main-nav__main-list--mobile-opened")})});let E=document.querySelector("header"),B=document.querySelector("main"),q=E.offsetHeight;B.style.paddingTop=`${q}px`;let k=document.querySelector(".hero"),p=document.querySelector(".hero__button"),w=-.2;window.addEventListener("scroll",()=>{let t=window.scrollY,m=t*w;k.style.backgroundPositionY=`${m}px`;let r=(t-30)/300;r=Math.max(0,Math.min(r,1)),p.style.opacity=r,p.style.pointerEvents=r>0?"auto":"none"});let o=document.querySelector(".main-header__category-slider");function f(){let t=o.scrollWidth-o.clientWidth;o.scrollLeft>=t-5?o.style.setProperty("--shadow-end-opacity","0"):o.style.setProperty("--shadow-end-opacity","1"),o.scrollLeft<=5?o.style.setProperty("--shadow-start-opacity","0"):o.style.setProperty("--shadow-start-opacity","1")}f(),o.addEventListener("scroll",f),document.querySelectorAll(".favorite-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--favorite-add"),t.classList.toggle("catalog__card-button--favorite-added")})});let i=document.querySelector(".user-communication__button--cart"),l=document.querySelector(".user-communication__button-counter--cart"),c=parseInt(l.textContent,10)||0;function b(){c>0?(i.classList.add("icon-button--user-communication-cart-added"),l.classList.remove("visually-hidden"),l.textContent=c,i.title=`Artikala u korpi: ${c}`):(i.classList.remove("icon-button--user-communication-cart-added"),l.classList.add("visually-hidden"),i.title="Nema artikala u korpi")}b(),document.querySelectorAll(".cart-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--add-to-cart"),t.classList.toggle("catalog__card-button--added-to-cart"),t.classList.contains("catalog__card-button--added-to-cart")?c++:c--,b()})})});
