document.addEventListener("DOMContentLoaded",()=>{let a=document.getElementById("search-open-button"),g=document.getElementById("search-activation-button"),n=document.getElementById("clear-input-button"),e=document.getElementById("search"),v=document.querySelector(".user-communication__button-wrapper--cart"),s=!1,y=e.value;function l(t){t.classList.toggle("visually-hidden")}e.value=localStorage.getItem("searchValue")||y,a.addEventListener("click",()=>{l(g),l(e),l(v),a.classList.toggle("icon-button--user-communication-search-opened"),a.classList.toggle("user-communication__button--search-opened"),s=!e.classList.contains("visually-hidden"),s&&e.focus(),n.classList.toggle("visually-hidden",e.value.trim()==="")}),document.addEventListener("click",t=>{s&&!e.contains(t.target)&&!a.contains(t.target)&&!n.contains(t.target)&&(g.classList.add("visually-hidden"),n.classList.add("visually-hidden"),e.classList.add("visually-hidden"),a.classList.remove("icon-button--user-communication-search-opened"),a.classList.remove("user-communication__button--search-opened"),v.classList.remove("visually-hidden"),s=!1)}),n.addEventListener("click",t=>{t.stopPropagation(),e.value="",e.focus(),n.classList.add("visually-hidden"),localStorage.setItem("searchValue",y)}),e.addEventListener("input",()=>{s&&n.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue")});let m=document.querySelector(".user-communication__menu-button"),h=document.querySelector(".main-nav__list");m.addEventListener("click",()=>{m.classList.toggle("icon-button--user-communication-menu-opened"),m.classList.toggle("icon-button--user-communication-menu-closed"),h.classList.toggle("main-nav__list--mobile-opened"),h.classList.toggle("main-nav__list--mobile-closed")});let S=document.querySelectorAll(".main-nav__main-list-text--list-down"),L=document.querySelector(".main-nav__sublist"),_=document.querySelector(".main-nav__main-list");S.forEach(t=>{t.addEventListener("click",i=>{i.preventDefault(),L.classList.toggle("main-nav__sublist--closed"),L.classList.toggle("main-nav__sublist--opened"),_.classList.toggle("main-nav__main-list--mobile-closed"),_.classList.toggle("main-nav__main-list--mobile-opened")})});let E=document.querySelector("header"),q=document.querySelector("main"),B=E.offsetHeight;q.style.paddingTop=`${B}px`;let k=document.querySelector(".hero"),p=document.querySelector(".hero__button"),w=-.2;window.addEventListener("scroll",()=>{let t=window.scrollY,i=t*w;k.style.backgroundPositionY=`${i}px`;let u=(t-15)/90;u=Math.max(0,Math.min(u,1)),p.style.opacity=u,p.style.pointerEvents=u>0?"auto":"none"});let o=document.querySelector(".main-header__category-slider");function f(){let t=o.scrollWidth-o.clientWidth;o.scrollLeft>=t-5?o.style.setProperty("--shadow-end-opacity","0"):o.style.setProperty("--shadow-end-opacity","1"),o.scrollLeft<=5?o.style.setProperty("--shadow-start-opacity","0"):o.style.setProperty("--shadow-start-opacity","1")}f(),o.addEventListener("scroll",f),document.querySelectorAll(".favorite-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--favorite-add"),t.classList.toggle("catalog__card-button--favorite-added")})});let r=document.querySelector(".user-communication__button--cart"),d=document.querySelector(".user-communication__button-counter--cart"),c=parseInt(d.textContent,10)||0;function b(){c>0?(r.classList.add("icon-button--user-communication-cart-added"),d.classList.remove("visually-hidden"),d.textContent=c,r.title=`Artikala u korpi: ${c}`):(r.classList.remove("icon-button--user-communication-cart-added"),d.classList.add("visually-hidden"),r.title="Nema artikala u korpi")}b(),document.querySelectorAll(".cart-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--add-to-cart"),t.classList.toggle("catalog__card-button--added-to-cart"),t.classList.contains("catalog__card-button--added-to-cart")?c++:c--,b()})}),document.querySelectorAll(".faq__card-title").forEach(t=>{t.addEventListener("click",function(){let i=this.nextElementSibling;l(i)})})});
