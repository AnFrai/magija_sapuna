document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("search-open-button"),g=document.getElementById("search-activation-button"),c=document.getElementById("clear-input-button"),e=document.getElementById("search"),_=document.querySelector(".user-communication__button-wrapper--cart"),i=!1,v=e.value;function l(t){t.classList.toggle("visually-hidden")}e.value=localStorage.getItem("searchValue")||v,n.addEventListener("click",()=>{l(g),l(e),l(_),n.classList.toggle("icon-button--user-communication-search-opened"),n.classList.toggle("user-communication__button--search-opened"),i=!e.classList.contains("visually-hidden"),i&&e.focus(),c.classList.toggle("visually-hidden",e.value.trim()==="")}),document.addEventListener("click",t=>{i&&!e.contains(t.target)&&!n.contains(t.target)&&!c.contains(t.target)&&(g.classList.add("visually-hidden"),c.classList.add("visually-hidden"),e.classList.add("visually-hidden"),n.classList.remove("icon-button--user-communication-search-opened"),n.classList.remove("user-communication__button--search-opened"),_.classList.remove("visually-hidden"),i=!1)}),c.addEventListener("click",t=>{t.stopPropagation(),e.value="",e.focus(),c.classList.add("visually-hidden"),localStorage.setItem("searchValue",v)}),e.addEventListener("input",()=>{i&&c.classList.toggle("visually-hidden",e.value.trim()===""),e.value.trim()!==""?localStorage.setItem("searchValue",e.value):localStorage.removeItem("searchValue")});let m=document.querySelector(".user-communication__menu-button"),y=document.querySelector(".main-nav__list");m.addEventListener("click",()=>{m.classList.toggle("icon-button--user-communication-menu-opened"),m.classList.toggle("icon-button--user-communication-menu-closed"),y.classList.toggle("main-nav__list--mobile-opened"),y.classList.toggle("main-nav__list--mobile-closed")});let E=document.querySelectorAll(".main-nav__main-list-text--list-down"),L=document.querySelector(".main-nav__sublist"),h=document.querySelector(".main-nav__main-list");E.forEach(t=>{t.addEventListener("click",a=>{a.preventDefault(),L.classList.toggle("main-nav__sublist--closed"),L.classList.toggle("main-nav__sublist--opened"),h.classList.toggle("main-nav__main-list--mobile-closed"),h.classList.toggle("main-nav__main-list--mobile-opened")})});let q=document.querySelector("header"),B=document.querySelector("main"),x=q.offsetHeight;B.style.paddingTop=`${x}px`;let k=document.querySelector(".hero"),p=document.querySelector(".hero__button"),w=-.2;window.addEventListener("scroll",()=>{let t=window.scrollY,a=t*w;k.style.backgroundPositionY=`${a}px`;let o=(t-15)/90;o=Math.max(0,Math.min(o,1)),p.style.opacity=o,p.style.pointerEvents=o>0?"auto":"none"});let s=document.querySelector(".main-header__category-slider");function f(){let t=s.scrollWidth-s.clientWidth;s.scrollLeft>=t-5?s.style.setProperty("--shadow-end-opacity","0"):s.style.setProperty("--shadow-end-opacity","1"),s.scrollLeft<=5?s.style.setProperty("--shadow-start-opacity","0"):s.style.setProperty("--shadow-start-opacity","1")}f(),s.addEventListener("scroll",f),document.querySelectorAll(".favorite-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("catalog__card-button--favorite-add"),t.classList.toggle("catalog__card-button--favorite-added")})});let r=document.querySelector(".user-communication__button--cart"),d=document.querySelector(".user-communication__button-counter--cart"),u=parseInt(d.textContent,10)||0;function S(){u>0?(r.classList.add("icon-button--user-communication-cart-added"),d.classList.remove("visually-hidden"),d.textContent=u,r.title=`Artikala u korpi: ${u}`):(r.classList.remove("icon-button--user-communication-cart-added"),d.classList.add("visually-hidden"),r.title="Nema artikala u korpi")}S(),document.querySelectorAll(".cart-button").forEach(t=>{t.addEventListener("click",()=>{t.classList.add("catalog__card-button--added-to-cart"),t.classList.remove("catalog__card-button--add-to-cart");let a=t.closest(".catalog__card").querySelector(".catalog__card-message"),o=a.querySelector(".catalog__card-message-text");a.classList.contains("catalog__card-message--animate")?(o.classList.add("catalog__card-message-text--added"),setTimeout(()=>{o.classList.remove("catalog__card-message-text--added")},500)):(a.classList.add("catalog__card-message--animate"),setTimeout(()=>{a.classList.remove("catalog__card-message--animate")},4e3));let b=t.querySelector(".catalog__card-button-counter--cart"),I=parseInt(b.textContent,10);b.textContent=I+1,u++,S()})}),document.querySelectorAll(".faq__card-title").forEach(t=>{t.addEventListener("click",function(){let a=this.nextElementSibling;l(a),this.classList.toggle("faq__card-title--opened")})})});
